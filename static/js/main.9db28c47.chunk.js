(this["webpackJsonpbook-a-table-admin"]=this["webpackJsonpbook-a-table-admin"]||[]).push([[0],{100:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),o=a(12),l=a.n(o),i=(a(89),a(20)),s=a(69),u=a(17),d=a.n(u),b=a(31),m=a(22),E=a(128),f=a(71),p=a(130),h=a(131),g=a(132),v=a(133),O=a(134),j=a(154),w=a(151),k=a(136),N=a(126),C=a(137),R=a(138),y=a(139),x=a(147),A=a(54),D=Object(r.createContext)({firebase:null}),W=a(125),I=a(152),P=a(153);!function(e){e[e.NEW=0]="NEW",e[e.CONFIRMED=1]="CONFIRMED",e[e.PREPARED=2]="PREPARED",e[e.REALIZED=3]="REALIZED",e[e.NOT_REALIZED=4]="NOT_REALIZED",e[e.CANCELED=5]="CANCELED"}(n||(n={}));var S,T={0:"New",1:"Confirmed",2:"Prepared",3:"Realized",4:"Not realized",5:"Canceled"};!function(e){e.CURRENT="current",e.NEXT="next",e.HISTORY="history"}(S||(S={}));var L,M=(L={},Object(m.a)(L,n.CANCELED,"default"),Object(m.a)(L,n.NEW,"default"),Object(m.a)(L,n.CONFIRMED,"default"),Object(m.a)(L,n.PREPARED,"secondary"),Object(m.a)(L,n.REALIZED,"primary"),Object(m.a)(L,n.NOT_REALIZED,"default"),L),U=Object(N.a)((function(e){return{table:{minWidth:650},th:{fontWeight:e.typography.fontWeightBold,color:e.palette.common.white,backgroundColor:e.palette.common.black}}})),Z=function(e){var t=e.type,a=function(e){var t=Object(r.useContext)(D).firebase;return{getData:Object(r.useCallback)(Object(b.a)(d.a.mark((function a(){var n,r,c,o,l,i;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t){a.next=2;break}return a.abrupt("return");case 2:return n=t.firestore().collection("bookings"),r=null,c=Object(W.a)(Object(I.a)()),o=Object(W.a)(Object(P.a)()),r=e===S.CURRENT?n.where("date",">",c).where("date","<",o):e===S.NEXT?n.where("date",">=",o):n.where("date","<=",c),a.next=9,r.get();case 9:if(!(l=a.sent).empty){a.next=13;break}return console.warn("No matching documents"),a.abrupt("return");case 13:return i=l.docs.map((function(e){return Object(A.a)(Object(A.a)({},e.data()),{},{id:e.id})})),a.abrupt("return",i);case 15:case"end":return a.stop()}}),a)}))),[t,e])}}(t).getData,o=Object(r.useState)(!0),l=Object(i.a)(o,2),s=l[0],u=l[1],m=Object(r.useState)(),N=Object(i.a)(m,2),L=N[0],Z=N[1],z=function(){var e=Object(r.useContext)(D).firebase;return{update:Object(r.useCallback)(function(){var t=Object(b.a)(d.a.mark((function t(a,n){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return r=e.firestore().collection("bookings"),t.abrupt("return",r.doc(a).update(n));case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),[e])}}().update,B=U(),H=Object(r.useRef)(""),F=Object(r.useCallback)(Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.next=3,a();case 3:t=e.sent,Z(t),u(!1);case 6:case"end":return e.stop()}}),e)}))),[a]),_=function(){var e=Object(b.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return H.current=t,e.next=3,z(t,{status:a});case 3:F(),H.current="";case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),X=Object(r.useCallback)((function(e){var a=new Date(e);return t===S.CURRENT?Object(x.a)(a,"HH:mm"):Object(x.a)(a,"yyyy-MM-dd HH:mm")}),[t]);return Object(r.useEffect)((function(){F()}),[F]),c.a.createElement(c.a.Fragment,null,L?c.a.createElement(E.a,{component:f.a},c.a.createElement(p.a,{className:B.table,"aria-label":"bookings list"},c.a.createElement(h.a,null,c.a.createElement(g.a,null,c.a.createElement(v.a,{className:B.th},"Who"),c.a.createElement(v.a,{className:B.th,align:"center"},"When"),c.a.createElement(v.a,{className:B.th,align:"center"},"Persons"),c.a.createElement(v.a,{className:B.th,align:"center"},"Where"),c.a.createElement(v.a,{className:B.th,align:"center"},"Status"),c.a.createElement(v.a,{className:B.th,align:"center"},"Comment"),c.a.createElement(v.a,{className:B.th}))),c.a.createElement(O.a,null,L.map((function(e){return c.a.createElement(g.a,{key:e.id},c.a.createElement(v.a,{component:"th",scope:"row"},e.name),c.a.createElement(v.a,{align:"center"},X(e.date)),c.a.createElement(v.a,{align:"center"},e.people),c.a.createElement(v.a,{align:"center"},e.area),c.a.createElement(v.a,{align:"center"},c.a.createElement(j.a,{color:M[e.status],label:T[e.status]})),c.a.createElement(v.a,{align:"center"},e.comment),c.a.createElement(v.a,{align:"right"},t===S.CURRENT&&e.status<n.PREPARED&&c.a.createElement(w.a,{title:"Mark prepared"},c.a.createElement(k.a,{edge:"end","aria-label":"prepared",disabled:H.current===e.id,onClick:function(){return _(e.id,n.PREPARED)}},c.a.createElement(C.a,null))),t===S.NEXT&&e.status===n.PREPARED&&c.a.createElement(c.a.Fragment,null,c.a.createElement(w.a,{title:"Mark not realized"},c.a.createElement(k.a,{edge:"end","aria-label":"not realized",disabled:H.current===e.id,onClick:function(){return _(e.id,n.NOT_REALIZED)}},c.a.createElement(R.a,null))),c.a.createElement(w.a,{title:"Mark realized"},c.a.createElement(k.a,{edge:"end","aria-label":"realized",disabled:H.current===e.id,onClick:function(){return _(e.id,n.REALIZED)}},c.a.createElement(y.a,null))))))}))))):c.a.createElement("div",null,s?"Loading...":"No bookings found"))},z=a(140),B=a(141),H=a(146),F=a(142),_=a(143),X=Object(N.a)((function(e){return{error:{padding:e.spacing(1),color:e.palette.error.main,textAlign:"center"},content:{"& > *":{marginBottom:e.spacing(2)}},card:{maxWidth:400,margin:"40px auto"},actions:{justifyContent:"center"}}})),K=function(){var e=X(),t=Object(r.useState)(!1),a=Object(i.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(""),s=Object(i.a)(l,2),u=s[0],d=s[1],b=Object(r.useState)(""),m=Object(i.a)(b,2),E=m[0],f=m[1],p=Object(r.useContext)(D).firebase,h=function(e){"Enter"===e.key&&g()},g=function(){p&&p.auth().signInWithEmailAndPassword(u,E).catch((function(e){o(!0)}))};return c.a.createElement(z.a,{className:e.card},c.a.createElement(B.a,{className:e.content},n&&c.a.createElement("p",{className:e.error},"Incorrect email and/or password"),c.a.createElement(H.a,{label:"E-mail",autoFocus:!0,value:u,onChange:function(e){var t;o(!1),d(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)},fullWidth:!0,onKeyPress:h}),c.a.createElement(H.a,{label:"Password",type:"password",value:E,onChange:function(e){var t;o(!1),f(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)},fullWidth:!0,onKeyPress:h})),c.a.createElement(F.a,{className:e.actions},c.a.createElement(_.a,{variant:"contained",color:"primary",onClick:g},"Log in")))},Y=a(148),J=a(144),G=a(149),q=a(145),$=Object(N.a)((function(e){return{root:{position:"absolute",flexGrow:1,backgroundColor:e.palette.grey[100],top:0,bottom:0,right:0,left:0}}})),Q=function(e){var t=e.children,a=e.value,n=e.index,r=Object(s.a)(e,["children","value","index"]);return c.a.createElement("div",Object.assign({role:"tabpanel",hidden:a!==n,id:"nav-tabpanel-".concat(n),"aria-labelledby":"nav-tab-".concat(n)},r),a===n&&c.a.createElement(Y.a,{p:3},t))},V=function(){var e=$(),t=Object(r.useState)(0),a=Object(i.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(!1),s=Object(i.a)(l,2),u=s[0],d=s[1],b=Object(r.useContext)(D).firebase;return Object(r.useEffect)((function(){b&&b.auth().onAuthStateChanged((function(e){e?(o(0),d(!0)):d(!1)}))}),[b]),u?c.a.createElement("div",{className:e.root},c.a.createElement(J.a,{position:"static"},c.a.createElement(G.a,{variant:"fullWidth",value:n,onChange:function(e,t){o(t),b&&3===t&&b.auth().signOut()},"aria-label":"nav tabs example"},c.a.createElement(q.a,{label:"Current"}),c.a.createElement(q.a,{label:"Next"}),c.a.createElement(q.a,{label:"History"}),c.a.createElement(q.a,{label:"Sign out"}))),c.a.createElement(Q,{value:n,index:0},c.a.createElement(Z,{type:S.CURRENT})),c.a.createElement(Q,{value:n,index:1},c.a.createElement(Z,{type:S.NEXT})),c.a.createElement(Q,{value:n,index:2},c.a.createElement(Z,{type:S.HISTORY}))):c.a.createElement("div",{className:e.root},c.a.createElement(K,null))},ee=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function te(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var ae=a(68),ne=a.n(ae),re=(a(94),a(98),ne.a.initializeApp({apiKey:"AIzaSyBCooZY6_EXqK5bDrW-toY0IGJ_xM7B8bE",authDomain:"book-a-table-96a18.firebaseapp.com",databaseURL:"https://book-a-table-96a18.firebaseio.com",projectId:"book-a-table-96a18",storageBucket:"book-a-table-96a18.appspot.com",messagingSenderId:"173934858452",appId:"1:173934858452:web:50fdcc7645b3d229572b41"}));l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(D.Provider,{value:{firebase:re}},c.a.createElement(V,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");ee?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):te(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):te(t,e)}))}}()},84:function(e,t,a){e.exports=a(100)},89:function(e,t,a){}},[[84,1,2]]]);
//# sourceMappingURL=main.9db28c47.chunk.js.map