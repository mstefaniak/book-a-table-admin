(this["webpackJsonpbook-a-table-admin"]=this["webpackJsonpbook-a-table-admin"]||[]).push([[0],{100:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),o=a(12),l=a.n(o),i=(a(89),a(17)),s=a(69),u=a(21),d=a.n(u),E=a(33),m=a(22),b=a(128),f=a(71),p=a(130),g=a(131),h=a(132),v=a(133),O=a(134),j=a(154),R=a(151),C=a(136),N=a(126),w=a(137),k=a(138),y=a(139),S=a(147),A=a(63),P=Object(r.createContext)({firebase:null}),T=a(125),D=a(152),W=a(153);!function(e){e[e.NEW=0]="NEW",e[e.CONFIRMED=1]="CONFIRMED",e[e.PREPARED=2]="PREPARED",e[e.REALIZED=3]="REALIZED",e[e.NOT_REALIZED=4]="NOT_REALIZED",e[e.CANCELED=5]="CANCELED"}(n||(n={}));var _,I={0:"New",1:"Confirmed",2:"Prepared",3:"Realized",4:"Not realized",5:"Canceled"};!function(e){e.CURRENT="current",e.NEXT="next",e.HISTORY="history"}(_||(_={}));var x,L=(x={},Object(m.a)(x,n.CANCELED,"default"),Object(m.a)(x,n.NEW,"default"),Object(m.a)(x,n.CONFIRMED,"default"),Object(m.a)(x,n.PREPARED,"secondary"),Object(m.a)(x,n.REALIZED,"primary"),Object(m.a)(x,n.NOT_REALIZED,"default"),x),U=Object(N.a)((function(e){return{table:{minWidth:650},th:{fontWeight:e.typography.fontWeightBold,color:e.palette.common.white,backgroundColor:e.palette.common.black}}})),B=function(e){var t=e.type,a=function(e){var t=Object(r.useContext)(P).firebase,a=Object(r.useState)(!0),n=Object(i.a)(a,2),c=n[0],o=n[1],l=Object(r.useState)([]),s=Object(i.a)(l,2),u=s[0],m=s[1],b=function(e){if(o(!1),e.empty)console.warn("No matching documents");else{var t=e.docs.map((function(e){return Object(A.a)({},e.data(),{id:e.id})}));m(t)}},f=Object(r.useCallback)(Object(E.a)(d.a.mark((function a(){var n,r,c,o,l;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t){a.next=2;break}return a.abrupt("return");case 2:return n=t.firestore().collection("bookings"),r=null,c=Object(T.a)(Object(D.a)()),o=Object(T.a)(Object(W.a)()),(r=e===_.CURRENT?n.where("date",">",c).where("date","<",o).orderBy("date","asc"):e===_.NEXT?n.where("date",">=",o).orderBy("date","asc"):n.where("date","<=",c).orderBy("date","desc")).onSnapshot((function(e){b(e)}),(function(e){console.log("Encountered error: ".concat(e))})),a.next=10,r.get();case 10:l=a.sent,b(l);case 12:case"end":return a.stop()}}),a)}))),[t,e]);return Object(r.useEffect)((function(){f()}),[f]),{bookings:u,loading:c}}(t),o=a.bookings,l=a.loading,s=function(){var e=Object(r.useContext)(P).firebase;return{update:Object(r.useCallback)(function(){var t=Object(E.a)(d.a.mark((function t(a,n){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return r=e.firestore().collection("bookings"),t.abrupt("return",r.doc(a).update(n));case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),[e])}}().update,u=U(),m=Object(r.useRef)(""),N=function(){var e=Object(E.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m.current=t,e.next=3,s(t,{status:a});case 3:m.current="";case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),x=Object(r.useCallback)((function(e){var a=new Date(e);return t===_.CURRENT?Object(S.a)(a,"HH:mm"):Object(S.a)(a,"yyyy-MM-dd HH:mm")}),[t]);return c.a.createElement(c.a.Fragment,null,o.length?c.a.createElement(b.a,{component:f.a},c.a.createElement(p.a,{className:u.table,"aria-label":"bookings list"},c.a.createElement(g.a,null,c.a.createElement(h.a,null,c.a.createElement(v.a,{className:u.th},"Who"),c.a.createElement(v.a,{className:u.th,align:"center"},"When"),c.a.createElement(v.a,{className:u.th,align:"center"},"Persons"),c.a.createElement(v.a,{className:u.th,align:"center"},"Where"),c.a.createElement(v.a,{className:u.th,align:"center"},"Status"),c.a.createElement(v.a,{className:u.th,align:"center"},"Comment"),c.a.createElement(v.a,{className:u.th}))),c.a.createElement(O.a,null,o.map((function(e){return c.a.createElement(h.a,{key:e.id},c.a.createElement(v.a,{component:"th",scope:"row"},e.name),c.a.createElement(v.a,{align:"center"},x(e.date)),c.a.createElement(v.a,{align:"center"},e.people),c.a.createElement(v.a,{align:"center"},e.area),c.a.createElement(v.a,{align:"center"},c.a.createElement(j.a,{color:L[e.status],label:I[e.status]})),c.a.createElement(v.a,{align:"center"},e.comment),c.a.createElement(v.a,{align:"right"},t===_.CURRENT&&e.status<n.PREPARED&&c.a.createElement(R.a,{title:"Mark prepared"},c.a.createElement(C.a,{edge:"end","aria-label":"prepared",disabled:m.current===e.id,onClick:function(){return N(e.id,n.PREPARED)}},c.a.createElement(w.a,null))),(t===_.CURRENT||t===_.HISTORY)&&e.status===n.PREPARED&&c.a.createElement(c.a.Fragment,null,c.a.createElement(R.a,{title:"Mark not realized"},c.a.createElement(C.a,{edge:"end","aria-label":"not realized",disabled:m.current===e.id,onClick:function(){return N(e.id,n.NOT_REALIZED)}},c.a.createElement(k.a,null))),c.a.createElement(R.a,{title:"Mark realized"},c.a.createElement(C.a,{edge:"end","aria-label":"realized",disabled:m.current===e.id,onClick:function(){return N(e.id,n.REALIZED)}},c.a.createElement(y.a,null))))))}))))):c.a.createElement("div",null,l?"Loading...":"No bookings found"))},H=a(140),K=a(141),M=a(146),F=a(142),Z=a(143),z=Object(N.a)((function(e){return{error:{padding:e.spacing(1),color:e.palette.error.main,textAlign:"center"},content:{"& > *":{marginBottom:e.spacing(2)}},card:{maxWidth:400,margin:"40px auto"},actions:{justifyContent:"center"}}})),Y=function(){var e=z(),t=Object(r.useState)(!1),a=Object(i.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(""),s=Object(i.a)(l,2),u=s[0],d=s[1],E=Object(r.useState)(""),m=Object(i.a)(E,2),b=m[0],f=m[1],p=Object(r.useContext)(P).firebase,g=function(e){"Enter"===e.key&&h()},h=function(){p&&p.auth().signInWithEmailAndPassword(u,b).catch((function(e){o(!0)}))};return c.a.createElement(H.a,{className:e.card},c.a.createElement(K.a,{className:e.content},n&&c.a.createElement("p",{className:e.error},"Incorrect email and/or password"),c.a.createElement(M.a,{label:"E-mail",autoFocus:!0,value:u,onChange:function(e){var t;o(!1),d(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)},fullWidth:!0,onKeyPress:g}),c.a.createElement(M.a,{label:"Password",type:"password",value:b,onChange:function(e){var t;o(!1),f(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)},fullWidth:!0,onKeyPress:g})),c.a.createElement(F.a,{className:e.actions},c.a.createElement(Z.a,{variant:"contained",color:"primary",onClick:h},"Log in")))},J=a(148),X=a(144),V=a(149),G=a(145),$=Object(N.a)((function(e){return{root:{position:"absolute",flexGrow:1,backgroundColor:e.palette.grey[100],top:0,bottom:0,right:0,left:0}}})),q=function(e){var t=e.children,a=e.value,n=e.index,r=Object(s.a)(e,["children","value","index"]);return c.a.createElement("div",Object.assign({role:"tabpanel",hidden:a!==n,id:"nav-tabpanel-".concat(n),"aria-labelledby":"nav-tab-".concat(n)},r),a===n&&c.a.createElement(J.a,{p:3},t))},Q=function(){var e=$(),t=Object(r.useState)(0),a=Object(i.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(!0),s=Object(i.a)(l,2),u=s[0],d=s[1],E=Object(r.useState)(!1),m=Object(i.a)(E,2),b=m[0],f=m[1],p=Object(r.useContext)(P).firebase;return Object(r.useEffect)((function(){p&&p.auth().onAuthStateChanged((function(e){e?(o(0),f(!0)):f(!1),d(!1)}))}),[p]),u?null:b?c.a.createElement("div",{className:e.root},c.a.createElement(X.a,{position:"static"},c.a.createElement(V.a,{variant:"fullWidth",value:n,onChange:function(e,t){o(t),p&&3===t&&p.auth().signOut()},"aria-label":"nav tabs example"},c.a.createElement(G.a,{label:"Current"}),c.a.createElement(G.a,{label:"Upcoming"}),c.a.createElement(G.a,{label:"History"}),c.a.createElement(G.a,{label:"Sign out"}))),c.a.createElement(q,{value:n,index:0},c.a.createElement(B,{type:_.CURRENT})),c.a.createElement(q,{value:n,index:1},c.a.createElement(B,{type:_.NEXT})),c.a.createElement(q,{value:n,index:2},c.a.createElement(B,{type:_.HISTORY}))):c.a.createElement("div",{className:e.root},c.a.createElement(Y,null))},ee=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function te(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var ae=a(68),ne=a.n(ae),re=(a(94),a(98),Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_FIREBASE_PROJECT_ID),ce={apiKey:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_FIREBASE_API_KEY,authDomain:"".concat(re,".firebaseapp.com"),databaseURL:"https://".concat(re,".firebaseio.com"),projectId:re,storageBucket:"".concat(re,".appspot.com"),messagingSenderId:"173934858452",appId:"1:173934858452:web:50fdcc7645b3d229572b41"},oe=ne.a.initializeApp(ce);l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(P.Provider,{value:{firebase:oe}},c.a.createElement(Q,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");ee?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):te(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):te(t,e)}))}}()},84:function(e,t,a){e.exports=a(100)},89:function(e,t,a){}},[[84,1,2]]]);
//# sourceMappingURL=main.c427f740.chunk.js.map